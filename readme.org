#+title: 100-questions-about-orgmode
#+options: toc:nil date:nil num:nil
* orgmode [0/0]
:PROPERTIES:
:COOKIE_DATA: checkbox recursive
:END:
** Agenda [12/12]
- [X] å¦‚ä½•è®¾å®š Agenda æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„
  #+begin_src emacs-lisp :tangle yes
  ;; 1. When a capture template specifies a target file that is not an
  ;;    absolute path.  The path will then be interpreted relative to
  ;;    org-directory
  ;; 2. When the value of variable org-agenda-files is a single file, any
  ;;    relative paths in this file will be taken as relative to
  ;;    org-directory.
  (setq org-directory "~/Documents/emacs/org/")
  #+end_src
- [X] å¦‚ä½•æŒ‡å®šä¸€ä¸ªç›®å½•åŠå…¶å­ç›®å½•ä¸­çš„æ‰€æœ‰ org æ–‡ä»¶ä¸º agenda files
  #+begin_src emacs-lisp :tangle yes
  (after! org
    (setq org-agenda-files
          (directory-files-recursively
           (concat org-directory "roam") "\\.org$")))
  #+end_src
- [X] å¦‚ä½•è®¾å®šè‡ªå·±çš„ç§æœ‰çºªå¿µæ—¥æ–‡ä»¶
  #+begin_src emacs-lisp :tangle yes
  (after! org
    (setq diary-file
          (concat org-directory "private/standard-diary")))

  ;; åœ¨standard-diary æ–‡ä»¶ä¸­, å†™ä¸‹é¢è¿™è¡Œ, å°±ä¼šåœ¨ç”Ÿæ—¥å½“å¤©çœ‹åˆ°åé¢çš„æç¤ºè¯­å¥
  ;; %%(org-anniversary 2000 1 1) I am %d years old
  #+end_src
- [X] å¦‚ä½•è®¾å®š Agenda view æ—¶é—´æ˜¾ç¤ºä¸ºä¸¤ä½æ•°(9:30 ->  09:30)
  #+begin_src emacs-lisp :tangle yes
  (after! org
    (setq org-agenda-time-leading-zero t))
  #+end_src
- [X] å¦‚ä½•è®¾å®š Agenda view é»˜è®¤å±•ç¤ºåŒºé—´ä¸ºä¸€å‘¨
  #+begin_src emacs-lisp :tangle yes
  (after! org

    ;; Number of days to include in overview display.
    ;; Can be day, week, month, year, or any number of days.
    (setq org-agenda-span 7))
  #+end_src
- [X] å¦‚ä½•è®¾å®š Agenda view é»˜è®¤ä»å‘¨ä¸€å¼€å§‹å±•ç¤º
  #+begin_src emacs-lisp :tangle yes
  (after! org

    ;; 0 denotes Sunday, 1 denotes Monday, etc.
    ;; When nil, always start on the current day.
    (setq org-agenda-start-on-weekday 1))
  #+end_src
- [X] å¦‚ä½•å…³é—­ Agenda view æ—¶é—´åˆ†éš”çº¿
  #+begin_src emacs-lisp :tangle yes
  (setq org-agenda-use-time-grid nil)
  #+end_src
- [X] å¦‚ä½•å…³é—­ Agenda view ä¸­æ‰€æœ‰ tags çš„æ˜¾ç¤º
  #+begin_src emacs-lisp :tangle yes
  (setq org-agenda-hide-tags-regexp ".")
  #+end_src
- [X] å¦‚ä½•å…³é—­ Agenda view æ˜¾ç¤ºå·²ç»å®Œæˆçš„é¢„çº¦äº‹é¡¹
  #+begin_src emacs-lisp :tangle yes
  (setq org-agenda-skip-scheduled-if-done t)
  #+end_src
- [X] å¦‚ä½•è®¾ç½® Agenda view çš„çª—å£æ˜¾ç¤º?
  #+begin_src emacs-lisp :tangle yes
  (setq org-agenda-window-setup 'current-window)
  #+end_src
- [X] å¦‚ä½•è®¾ç½® Agenda view deadline éšæ—¶é—´ç´§è¿«ç¨‹åº¦çš„æ ·å¼
  #+begin_src emacs-lisp
  (setq org-agenda-deadline-faces
        '((1.001 . error)
          (1.0 . org-warning)
          (0.5 . org-upcoming-deadline)
          (0.0 . org-upcoming-distant-deadline)))
  #+end_src
- [X] å¦‚ä½•å…³é—­ Agenda view ä¸­çš„å°æ—¶åˆ†éš”çº¿
  #+begin_src emacs-lisp
  (setq org-agenda-use-time-grid nil)
  #+end_src

** Block [6/6]

- [X] å¦‚ä½•åœ¨ Source Block ä¸­åƒåœ¨è¯­è¨€ mode ä¸­ä¸€æ ·çš„ç¼©è¿›
  #+begin_src emacs-lisp :tangle yes
  (after! org
    (setq org-src-tab-acts-natively t)
    (setq org-src-preserve-indentation nil))
  #+end_src
- [X] å¦‚ä½•è®© code block é»˜è®¤æŠ˜å å±•ç¤º
  #+begin_src emacs-lisp
  (after! org
    (setq org-hide-block-startup t))
  #+end_src
- [X] å¦‚ä½•è®© code block æŠ˜å æ—¶æ˜¾ç¤ºä¸ºä¸€ä¸ªç¬¦å·
  #+begin_src emacs-lisp
  (defun eli-hide-org-block-begin-line (orig from to flag spec)
    (let* ((beg-of-line (save-excursion
                          (beginning-of-line)
                          (point)))
           (lang (car (org-babel-get-src-block-info)))
           (beg (+ beg-of-line
                   12
                   (length lang))))
      (if (eq spec 'org-hide-block)
          (funcall orig beg to flag spec)
        (funcall orig from to flag spec))))

  (advice-add 'org-flag-region :around #'eli-hide-org-block-begin-line)

  #+end_src
- [X] å¦‚ä½•ç¦ç”¨ evaluate code block æ—¶çš„ç¡®è®¤æç¤º
  #+begin_src emacs-lisp
  (after! org
    (setq org-confirm-babel-evaluate nil))
  #+end_src
- [X] å¦‚ä½•ç¾åŒ– quote å’Œ verse block
  #+begin_src emacs-lisp
  (setq org-fontify-quote-and-verse-blocks t)
  #+end_src
- [X] å¦‚ä½•ä½¿ç”¨ Plantuml
  #+begin_src emacs-lisp
  (add-to-list 'org-src-lang-modes '("plantuml" . plantuml))
  (setq org-plantuml-jar-path (expand-file-name "~/Documents/emacs/org/private/plantuml.jar"))
  (setq plantuml-default-exec-mode 'jar)

  (org-babel-do-load-languages
   'org-babel-load-languages
   '((plantuml . t)))
  #+end_src

** Capture [0/0]
** Export [1/1]
- [X] å¦‚ä½•é…ç½®å¯¼å‡º HTML çš„æ ·å¼
  #+begin_src emacs-lisp
  (setq org-html-coding-system 'utf-8)
  (setq org-html-doctype "html5")
  (setq org-html-head
        "<link rel='stylesheet' type='text/css' href='https://gongzhitaao.org/orgcss/org.css'/> ")
  #+end_src
** General [1/1]
:PROPERTIES:
:COOKIE_DATA: checkbox recursive
:END:

- [X] å¦‚ä½•åœ¨ macOS ä¸Šç²˜è´´å›¾ç‰‡åˆ° Emacs
  #+begin_src emacs-lisp
  (use-package! org-mac-image-paste
    :config
    (org-mac-image-paste-mode 1)
    )

  #+end_src
** LaTex [1/1]
- [X] å¦‚ä½•ç›´è§‚å±•ç¤º LaTeX å…¬å¼æ•ˆæœ
  #+begin_src emacs-lisp
  (use-package! org-fragtog
    :hook (org-mode . org-fragtog-mode))

  #+end_src
** List [2/2]
- [X] å¦‚ä½•æ›´æ”¹å­ list çš„æ˜¾ç¤ºç¬¦å·
  #+begin_src emacs-lisp :tangle yes
  (after! org
    (setq org-list-demote-modify-bullet
          '(("+" . "-") ("-" . "+") ("*" . "+") ("1." . "a."))))
  #+end_src
- [X] å¦‚ä½•æ›´æ”¹ List çš„æ ·å¼
  #+begin_src emacs-lisp
  (font-lock-add-keywords
   'org-mode
   '(("^ +\\([-*]\\) "
      (0 (prog1 () (compose-region (match-beginning 1) (match-end 1) "â–»"))))))
  #+end_src
** Table [4/4]
- [X]  orgmode çš„è¡¨æ ¼æ˜¯å¦æ”¯æŒæ•°æ®é€è§†è¡¨
  éœ€è¦å®‰è£…é¢å¤–çš„ Package:

  https://github.com/tbanel/orgaggregate

  #+begin_quote

Aggregating a table is creating a new table by computing sums,
averages, and so on, out of material from the first table.

  #+end_quote

- [X] orgmode çš„è¡¨æ ¼æ˜¯å¦æ”¯æŒç”» ascii å›¾å½¢
  å…‰æ ‡æ”¾åœ¨è¦ç”»å›¾çš„æ•°æ®åˆ—ä¸Š, ç„¶å M-x: orgtbl-ascii-draw
  #+begin_quote
  | x | x^3 |                                        |
  | 1 |   1 | :                                      |
  | 2 |   8 | Wc                                     |
  | 3 |  27 | WWWWh                                  |
  | 4 |  64 | WWWWWWWWWWW.                           |
  | 5 | 125 | WWWWWWWWWWWWWWWWWWWWWl                 |
  | 6 | 216 | WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWc |
  #+tblfm: $2=$1*$1*$1::$3='(orgtbl-ascii-draw $2 0 289 50)
  #+end_quote

- [X]  orgmode çš„è¡¨æ ¼å¦‚ä½•ä¸­è‹±æ–‡æ··æ’å¯¹é½
  #+begin_src emacs-lisp

  (use-package! valign
    :config
    (setq valign-fancy-bar t)
    (add-hook 'org-mode-hook #'valign-mode))
  #+end_src

- [X] orgmode çš„è¡¨æ ¼å¦‚ä½•æ’å…¥ | ç«–çº¿
  å‚ç…§æ‰‹å†Œ[[https://orgmode.org/manual/Built_002din-Table-Editor.html#Built_002din-table-editor][link]]

  #+begin_quote
  To insert a vertical bar into a table field, use â€˜\vertâ€™ or, inside a word â€˜abc\vert{}defâ€™.
  #+end_quote

** Tasks [12/12]
- [X] å¦‚ä½•è®¾ç½®é»˜è®¤çš„ TODO Keywords
  #+begin_src emacs-lisp
  (after! org
    (setq org-todo-keywords
          '((sequence "TODO" "WORK" "|" "DONE"))))
  #+end_src

- [X] å¦‚ä½•ç»™æŒ‡å®šçš„æ–‡ä»¶è®¾ç½®ç‰¹å®šçš„ TODO Keywords
  #+begin_src emacs-lisp :tangle yes
  ;; åœ¨æŒ‡å®šæ–‡ä»¶é¡¶éƒ¨å¢åŠ #+todo, è®¾ç½®æ‰€éœ€çš„Keywords
  ,#+todo: å¾…å®š(d) å®‰æ’(a) | ç»“æŸ(j)
  #+end_src

- [X] å¦‚ä½•ç¾åŒ– headline bullets
  #+begin_src emacs-lisp
  ;; ä½¿ç”¨ org-superstar package
  (after! org-superstar
    ;; other symbols like: ğŸ¦„ ğŸ§™ ğŸ» "ğŸ™˜" "ğŸ™™" "ğŸ™š" "ğŸ™›"
    (setq org-superstar-headline-bullets-list '( "â˜¯" "â˜·" "â˜²" "â˜µ")
          org-superstar-prettify-item-bullets t ))
  #+end_src

- [X] å¦‚ä½•åœ¨å®Œæˆä»»åŠ¡æ—¶è‡ªåŠ¨æ‰“ä¸Šå®Œæˆæ—¶é—´çš„æ ‡ç­¾
  #+begin_src emacs-lisp :tangle yes
  (after! org
    (setq org-log-done t))

  ;; Possible values are:

  ;;   nil     Don't add anything, just change the keyword
  ;;   time    (or t) Add a time stamp to the task
  ;;   note    Prompt for a note and add it with template org-log-note-headings

  #+end_src

- [X] å¦‚ä½•è®¾ç½®è®°å½• log ä¿¡æ¯åˆ° drawer ä¸­?
  #+begin_src emacs-lisp :tangle yes
  (after! org
    (setq org-log-into-drawer t))
  #+end_src

- [X] å¦‚ä½•è®©ä»»åŠ¡çš„ Property å¯ä»¥è¢«å­ä»»åŠ¡ç»§æ‰¿
  #+begin_src emacs-lisp :tangle yes
  ;; æ¯”å¦‚ä½ æƒ³è®¾ç½® :header-args: :mkdirp yes ä¹‹ç±»çš„å±æ€§, å°±ä¼šå¸Œæœ›å­ä»»åŠ¡å¯
  ;; ä»¥ç»§æ‰¿
  (after! org
    (setq org-use-property-inheritance t))
  #+end_src

- [X] å¦‚ä½•è®© =C-a= åœ¨ä»»åŠ¡æ ‡é¢˜ä¸Šé¢æ›´å¥½ç”¨
  #+begin_src emacs-lisp :tangle yes
  ;; When t, C-a will bring back the cursor to the beginning of the
  ;; headline text, i.e. after the stars and after a possible TODO
  ;; keyword.
  (after! org
    (setq org-special-ctrl-a/e t))
  #+end_src

- [X] å¦‚ä½•è®© =C-k= åœ¨ä»»åŠ¡æ ‡é¢˜ä¸Šé¢æ›´å¥½ç”¨
  #+begin_src emacs-lisp :tangle yes
  ;; When t, the following will happen while the cursor is in the
  ;; headline:

  ;; - When at the beginning of a headline, kill the entire subtree.
  ;; - When in the middle of the headline text, kill the text up to the
  ;; - tags.
  ;; - When after the headline text and before the tags, kill all
  ;; - the tags.
  (after! org
    (setq org-special-ctrl-k t))
  #+end_src

- [X] å¦‚ä½•éšè—ä»»åŠ¡å‰é¢çš„å¤šä¸ª* ç¬¦å·
  #+begin_src emacs-lisp :tangle yes

  ;; Non-nil means hide the first N-1 stars in a headline.
  (after! org
    (setq org-hide-leading-stars t))
  #+end_src

- [X] å¦‚ä½•æ›¿æ¢ä»»åŠ¡æŠ˜å çŠ¶æ€æ—¶å°¾éƒ¨çš„ç¬¦å·
  #+begin_src emacs-lisp :tangle yes
  ;; æ›¿æ¢ä¸ºä½ å–œæ¬¢çš„ç¬¦å·å³å¯
  (after! org
    (setq org-ellipsis " â–¾ "))
  #+end_src

- [X] å¦‚ä½•æ’å…¥ heading çš„æ—¶å€™, è€ƒè™‘åˆ°å½“å‰ subtree çš„å†…å®¹, åœ¨å…¶åæ’å…¥
  #+begin_src emacs-lisp :tangle yes
  (after! org
    (setq org-insert-heading-respect-content nil))
  #+end_src

- [X] å¦‚ä½•åœ¨å®Œæˆä»»åŠ¡æ—¶, å¢åŠ åˆ é™¤åˆ’æ‰æ ·å¼
  #+begin_src emacs-lisp
  ;; å®Œæˆä»»åŠ¡æ—¶, å°†å…¶åˆ’çº¿å‹¾æ‰
  (set-face-attribute 'org-headline-done nil :strike-through t)

  #+end_src
** Tag [1/1]
- [X] å¦‚ä½•è®¾å®šé»˜è®¤çš„ Tags
  #+begin_src emacs-lisp :tangle yes
  (after! org
    (setq org-tag-alist '(("@å·¥ä½œ" . ?w) ("@ç”Ÿæ´»" . ?l) ("@å­¦ä¹ " . ?s))))
  #+end_src
** UI [6/6]
- [X] å¦‚ä½•è‡ªå®šä¹‰å„æ ‡æ ‡é¢˜çš„å¤§å°å’Œå­—ä½“ç²—ç»†
  #+begin_src emacs-lisp
  (after! org
    (custom-set-faces!
      '(outline-1 :weight extra-bold :height 1.25)
      '(outline-2 :weight bold :height 1.15)
      '(outline-3 :weight bold :height 1.12)
      '(outline-4 :weight semi-bold :height 1.09)
      '(outline-5 :weight semi-bold :height 1.06)
      '(outline-6 :weight semi-bold :height 1.03)
      '(outline-8 :weight semi-bold)
      '(outline-9 :weight semi-bold))

    (custom-set-faces!
      '(org-document-title :height 1.2)))

  #+end_src
- [X] å¦‚ä½•åœ¨ä¸­è‹±æ–‡å­—ç¬¦ä¸­é—´è‡ªåŠ¨æ’å…¥ç©ºæ ¼
  #+begin_src emacs-lisp :tangle yes
  (use-package! pangu-spacing
    :config
    (global-pangu-spacing-mode 1)
    ;; åœ¨ä¸­è‹±æ–‡ç¬¦å·ä¹‹é—´, çœŸæ­£åœ°æ’å…¥ç©ºæ ¼
    (setq pangu-spacing-real-insert-separtor t))
  #+end_src

- [X] å¦‚ä½•ç¾åŒ– bold/code/italitic ç­‰æ ·å¼
  #+begin_src emacs-lisp
  (use-package! org-appear
    :hook (org-mode . org-appear-mode)
    :config
    (setq org-appear-autoemphasis t
          org-appear-autosubmarkers t
          org-appear-autolinks nil))

  #+end_src
- [X] å¦‚ä½•æ›´æ”¹è¡Œé—´è·
  #+begin_src emacs-lisp :tangle yes
  (after! org
    (setq line-spacing 0.25))
  #+end_src

- [X] å¦‚ä½•æ›´æ”¹åŠ ç²—æ ·å¼
  #+begin_src emacs-lisp :tangle yes
  (defface org-bold
    '((t :foreground "#d2268b"
       :background "#fefefe"
       :weight bold
       :underline t
       :overline t))
    "Face for org-mode bold."
    :group 'org-faces )

  (setq org-emphasis-alist
        '(("*" org-bold)
          ("/" italic)
          ("_" underline)
          ("=" ;; (:background "maroon" :foreground "white")
           org-verbatim verbatim)
          ("~" ;; (:background "deep sky blue" :foreground "MidnightBlue")
           org-code verbatim)
          ("+" (:strike-through t))))

  (set-face-background 'org-bold "#fefefe")
  (set-face-background 'org-verbatim "#fefefe")
  #+end_src

- [X] å¦‚ä½•è§£å†³ä¸­æ–‡å¼ºè°ƒæ ·å¼å‰åçš„ç©ºæ ¼é—®é¢˜
  #+begin_src emacs-lisp
  ;; https://emacs-china.org/t/org-mode/22313?u=vagrantjoker
  ;; è§£å†³ä¸­æ–‡æ ‡è®°å‰åç©ºæ ¼çš„é—®é¢˜
  (require 'ox)
  (font-lock-add-keywords 'org-mode
                          '(("\\cc\\( \\)[/+*_=~][^a-zA-Z0-9]*?[/+*_=~]\\( \\)?\\cc?"
                             (1 (prog1 () (compose-region (match-beginning 1) (match-end 1) ""))))
                            ("\\cc?\\( \\)?[/+*_=~][^a-zA-Z0-9]*?[/+*_=~]\\( \\)\\cc"
                             (2 (prog1 () (compose-region (match-beginning 2) (match-end 2) "")))))
                          'append)

  (with-eval-after-load 'org
    (defun eli-strip-ws-maybe (text _backend _info)
      (let* ((text (replace-regexp-in-string
                    "\\(\\cc\\) *\n *\\(\\cc\\)"
                    "\\1\\2" text));; remove whitespace from line break
             ;; remove whitespace from `org-emphasis-alist'
             (text (replace-regexp-in-string "\\(\\cc\\) \\(.*?\\) \\(\\cc\\)"
                                             "\\1\\2\\3" text))
             ;; restore whitespace between English words and Chinese words
             (text (replace-regexp-in-string "\\(\\cc\\)\\(\\(?:<[^>]+>\\)?[a-z0-9A-Z-]+\\(?:<[^>]+>\\)?\\)\\(\\cc\\)"
                                             "\\1 \\2 \\3" text)))
        text))
    (add-to-list 'org-export-filter-paragraph-functions #'eli-strip-ws-maybe))

  #+end_src
